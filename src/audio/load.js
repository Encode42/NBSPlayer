import{PlayerInstrument}from"../player/PlayerInstrument.js";NBSjs.setInstrumentClass(PlayerInstrument);let initialized=!1;const songCache=new Map;async function init(){initialized||(await PlayerInstrument.loadAll(),initialized=!0)}async function load(n,t){var e=songCache.get(n);if(e)return e;t=NBSjs.Song.fromArrayBuffer(t);for(const r of t.instruments)r.builtIn||(r.audioBuffer=PlayerInstrument.getCustom(r.audioSrc)?.audioBuffer);return songCache.set(n,t),t}export{init,load};