import{PlayerInstrument}from"../player/PlayerInstrument.js";NBSjs.setInstrumentClass(PlayerInstrument);let initialized=!1;const songCache=new Map;async function init(){initialized||(await PlayerInstrument.loadAll(),initialized=!0)}async function load(n){var t=songCache.get(n.name);if(t)return t;t=NBSjs.Song.fromArrayBuffer(await n.arrayBuffer());for(const e of t.instruments)e.builtIn||(e.audioBuffer=PlayerInstrument.getCustom(e.audioSrc)?.audioBuffer);return songCache.set(n.name,t),t}export{init,load};